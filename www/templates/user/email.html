<ion-view title="Alterar e-mail">
    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
    <ion-content class="has-header gem-ion-content">
        <form name="formEmail" ng-submit="false" novalidate class="login-form">
            <div class="list list-inset" style="background-color:#FFFFFF">
                <li class="item">
                    <i class="fa fa-envelope fa-lg"></i> Email {{vm.loggedUser.email}}
                </li>
                <label class="item item-input item-stacked-label">
                    <span class="input-label">Novo e-mail</span>
                    <input next-on-enter autofocus class="my-input" required unique-email type="email" name="novoEmail" id="novoEmail" ng-model-options="{debounce: 100}" ng-model="vm.loggedUser.novoEmail">
                    {{form.$error}}
                    <div ng-messages="formEmail.novoEmail.$error" class="validation-message text-warning">
                        <div ng-message="required">E-mail é obrigatório.</div>
                        <div ng-message="email">E-mail inválido.</div>
                        <div ng-message="unique">O e-mail informado já está cadastrado.</div>
                    </div>
                </label>         
                
                <label class="item item-input item-stacked-label">
                    <span class="input-label">Confirmar e-mail</span>
                    <input next-on-enter class="my-input" ng-pattern="vm.loggedUser.novoEmail" required form-email type="email" name="confirmaEmail" id="confirmaEmail" ng-model="vm.loggedUser.confirmaEmail">
                    <div ng-messages="formEmail.confirmaEmail.$error" class="validation-message text-warning">
                        <div ng-message="required">Confirmação é obrigatória</div>
                        <div ng-message="pattern">Confirmação inválida</div>
                    </div>                      
                </label>     
                
                <div class="item item-buttom-right">
                    <button angular-ripple ng-disabled="!formEmail.$valid" ng-click="formEmail.$valid && vm.confirmEditEmail(vm.loggedUser.novoEmail)" class="btn btn-primary pull-right"><i class="fa fa-check"></i> Confirmar</button>                      
                </div>                           
            </div>
        </form>
    </ion-content>
</ion-view>
